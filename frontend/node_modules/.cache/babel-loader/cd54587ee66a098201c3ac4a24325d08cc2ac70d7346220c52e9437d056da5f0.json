{"ast":null,"code":"var _jsxFileName = \"C:\\\\git\\\\Morevent\\\\frontend\\\\src\\\\contexts\\\\auth.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({});\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    axios.get('http://localhost:3001/login', {\n      withCredentials: true\n    }).then(response => {\n      if (response.data.loggedIn) {\n        setUser(response.data.user);\n      }\n    });\n  }, []);\n  const signin = (username, password) => {\n    axios.post('http://localhost:3001/login', {\n      username,\n      password\n    }, {\n      withCredentials: true\n    }).then(response => {\n      if (response.data.length > 0) {\n        setUser(response.data[0]);\n      } else {\n        return \"Senha ou usuário incorretos.\";\n      }\n    }).catch(() => {\n      return \"O usuário não existe\";\n    });\n  };\n  const signup = (username, email, password) => {\n    axios.post('http://localhost:3001/signup', {\n      username,\n      email,\n      password\n    }, {\n      withCredentials: true\n    }).then(response => {\n      return;\n    });\n  };\n  app.get('/logout', (req, res) => {\n    req.session.destroy(err => {\n      if (err) {\n        return res.send({\n          loggedIn: true\n        });\n      }\n      res.clearCookie('userId');\n      return res.send({\n        loggedIn: false\n      });\n    });\n  });\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      signed: !!user,\n      signin,\n      signup,\n      signout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","axios","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","get","withCredentials","then","response","data","loggedIn","signin","username","password","post","length","catch","signup","email","app","req","res","session","destroy","err","send","clearCookie","Provider","value","signed","signout","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/git/Morevent/frontend/src/contexts/auth.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport const AuthContext = createContext({});\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    axios.get('http://localhost:3001/login', { withCredentials: true })\r\n      .then(response => {\r\n        if (response.data.loggedIn) {\r\n          setUser(response.data.user);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  const signin = (username, password) => {\r\n    axios.post('http://localhost:3001/login', { username, password }, { withCredentials: true })\r\n      .then(response => {\r\n        if (response.data.length > 0) {\r\n          setUser(response.data[0]);\r\n        } else {\r\n          return \"Senha ou usuário incorretos.\";\r\n        }\r\n      })\r\n      .catch(() => {\r\n        return \"O usuário não existe\";\r\n      });\r\n  };\r\n\r\n  const signup = (username, email, password) => {\r\n    axios.post('http://localhost:3001/signup', { username, email, password }, { withCredentials: true })\r\n      .then(response => {\r\n        return;\r\n      });\r\n  };\r\n\r\n  app.get('/logout', (req, res) => {\r\n  req.session.destroy(err => {\r\n    if(err) {\r\n      return res.send({ loggedIn: true });\r\n    }\r\n\r\n    res.clearCookie('userId');\r\n    return res.send({ loggedIn: false });\r\n  });\r\n});\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, signed: !!user, signin, signup, signout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACjE,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,OAAO,MAAMC,WAAW,gBAAGN,aAAa,CAAC,CAAC,CAAC,CAAC;AAE5C,OAAO,MAAMO,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC5C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACdE,KAAK,CAACS,GAAG,CAAC,6BAA6B,EAAE;MAAEC,eAAe,EAAE;IAAK,CAAC,CAAC,CAChEC,IAAI,CAACC,QAAQ,IAAI;MAChB,IAAIA,QAAQ,CAACC,IAAI,CAACC,QAAQ,EAAE;QAC1BN,OAAO,CAACI,QAAQ,CAACC,IAAI,CAACN,IAAI,CAAC;MAC7B;IACF,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMQ,MAAM,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,KAAK;IACrCjB,KAAK,CAACkB,IAAI,CAAC,6BAA6B,EAAE;MAAEF,QAAQ;MAAEC;IAAS,CAAC,EAAE;MAAEP,eAAe,EAAE;IAAK,CAAC,CAAC,CACzFC,IAAI,CAACC,QAAQ,IAAI;MAChB,IAAIA,QAAQ,CAACC,IAAI,CAACM,MAAM,GAAG,CAAC,EAAE;QAC5BX,OAAO,CAACI,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC;MAC3B,CAAC,MAAM;QACL,OAAO,8BAA8B;MACvC;IACF,CAAC,CAAC,CACDO,KAAK,CAAC,MAAM;MACX,OAAO,sBAAsB;IAC/B,CAAC,CAAC;EACN,CAAC;EAED,MAAMC,MAAM,GAAGA,CAACL,QAAQ,EAAEM,KAAK,EAAEL,QAAQ,KAAK;IAC5CjB,KAAK,CAACkB,IAAI,CAAC,8BAA8B,EAAE;MAAEF,QAAQ;MAAEM,KAAK;MAAEL;IAAS,CAAC,EAAE;MAAEP,eAAe,EAAE;IAAK,CAAC,CAAC,CACjGC,IAAI,CAACC,QAAQ,IAAI;MAChB;IACF,CAAC,CAAC;EACN,CAAC;EAEDW,GAAG,CAACd,GAAG,CAAC,SAAS,EAAE,CAACe,GAAG,EAAEC,GAAG,KAAK;IACjCD,GAAG,CAACE,OAAO,CAACC,OAAO,CAACC,GAAG,IAAI;MACzB,IAAGA,GAAG,EAAE;QACN,OAAOH,GAAG,CAACI,IAAI,CAAC;UAAEf,QAAQ,EAAE;QAAK,CAAC,CAAC;MACrC;MAEAW,GAAG,CAACK,WAAW,CAAC,QAAQ,CAAC;MACzB,OAAOL,GAAG,CAACI,IAAI,CAAC;QAAEf,QAAQ,EAAE;MAAM,CAAC,CAAC;IACtC,CAAC,CAAC;EACJ,CAAC,CAAC;EAEA,oBACEZ,OAAA,CAACC,WAAW,CAAC4B,QAAQ;IAACC,KAAK,EAAE;MAAEzB,IAAI;MAAE0B,MAAM,EAAE,CAAC,CAAC1B,IAAI;MAAEQ,MAAM;MAAEM,MAAM;MAAEa;IAAQ,CAAE;IAAA7B,QAAA,EAC5EA;EAAQ;IAAA8B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAAChC,EAAA,CAjDWF,YAAY;AAAAmC,EAAA,GAAZnC,YAAY;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}